(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{472:function(s,t,a){"use strict";a.r(t);var r=a(11),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一条sql是如何执行的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一条sql是如何执行的"}},[s._v("#")]),s._v(" 一条SQL是如何执行的")]),s._v(" "),a("h2",{attrs:{id:"_1-mysql架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql架构"}},[s._v("#")]),s._v(" 1. MySQL架构")]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/20220601144346.png"}}),s._v(" "),a("p",[a("strong",[s._v("Mysql可以分为Server层和存储引擎层两部分")])]),s._v(" "),a("h3",{attrs:{id:"_1-1-server层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-server层"}},[s._v("#")]),s._v(" 1.1 Server层")]),s._v(" "),a("blockquote",[a("p",[s._v("覆盖MySQL的大多数核心服务功能，以及所有的内置函数(如日期、时间、数学和加密函数等)，所有跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图等。")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("连接器")]),s._v("：负责与客户端建立连接、获取权限、维持和管理连接。")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql -h"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ip")]),s._v(" -P"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$port")]),s._v(" -u"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v(" -p\nmysql -u root -p\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("查询缓存")]),s._v("：当MySQL拿到一个查询请求后，会先到查询缓存看看，之前是不是执行过这条语句。之前执行过的语句及其结果可能会以key-value缓存在内存中。"),a("strong",[s._v("查询缓存的失效非常频繁，因为只要对一个表更新，则这个表上所有的查询缓存都会被清空。")])]),s._v(" "),a("li",[a("strong",[s._v("分析器")]),s._v("：分析器先会做词法分析并键关键字提取出来。")]),s._v(" "),a("li",[a("strong",[s._v("优化器")]),s._v("：在表中有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联的时候，决定各个表的顺序。")]),s._v(" "),a("li",[a("strong",[s._v("执行器")]),s._v("：首先会判断你对这个表是否有查询的权限，如果没有则返回权限错误，如果有权限，就继续执行并根据表的引擎定义，去使用这个引擎提供的接口。")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-存储引擎层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-存储引擎层"}},[s._v("#")]),s._v(" 1.2 存储引擎层")]),s._v(" "),a("blockquote",[a("p",[s._v("负责数据的存储和读取，采用插件式架构模式")])]),s._v(" "),a("p",[s._v("支持InnoDB、MyISAM、Memory等多个存储引擎。MySQL5.5.5版本之后变成了默认的存储引擎。建表时如果不指定则默认使用InnoDB。")])])}),[],!1,null,null,null);t.default=e.exports}}]);