(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{456:function(t,e,a){"use strict";a.r(e);var s=a(11),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("h3",{attrs:{id:"_1-image-vs-container"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-image-vs-container"}},[t._v("#")]),t._v(" 1. Image VS Container")]),t._v(" "),a("p",[a("strong",[t._v("image镜像")])]),t._v(" "),a("ul",[a("li",[t._v("Docker image 是一个read-only文件")]),t._v(" "),a("li",[t._v("这个文件包含文件系统，源码，库文件，依赖，工具等一些运行application所需要的文件")]),t._v(" "),a("li",[t._v("可以理解成一个模板")]),t._v(" "),a("li",[t._v("docker image具有分层的概念")])]),t._v(" "),a("p",[a("strong",[t._v("container容器")])]),t._v(" "),a("ul",[a("li",[t._v("一个运行中的docker images")]),t._v(" "),a("li",[t._v("实质是复制image并在image最上层加上一层read-write的层(container layer, 容器层)")]),t._v(" "),a("li",[t._v("基于同一个image可以创建多个container")])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/image-20220316182335099.png"}}),t._v(" "),a("p",[a("strong",[t._v("docker image的获取")])]),t._v(" "),a("ul",[a("li",[t._v("自己制作")]),t._v(" "),a("li",[t._v("从registery拉取(docker hub)")])]),t._v(" "),a("h3",{attrs:{id:"_2-两种模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-两种模式"}},[t._v("#")]),t._v(" 2. 两种模式")]),t._v(" "),a("ul",[a("li",[t._v("Attached模式：前台运行")]),t._v(" "),a("li",[t._v("Detached模式：后台运行")])]),t._v(" "),a("h3",{attrs:{id:"_3-容器和虚拟机的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-容器和虚拟机的区别"}},[t._v("#")]),t._v(" 3. 容器和虚拟机的区别")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/image-20220316191008188.png"}}),t._v(" "),a("h3",{attrs:{id:"_4-docker-container-run背后发生了什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker-container-run背后发生了什么"}},[t._v("#")]),t._v(" 4. docker container run背后发生了什么？")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" container run -dp "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(":80 --name webhost nginx \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",[a("li",[t._v("在本地查找是否有nignx这个image镜像")]),t._v(" "),a("li",[t._v("有则使用本地，没有则去远程imgage registry查找nignx镜像(docker hub)")]),t._v(" "),a("li",[t._v("下载最新版的nignx镜像(nignx:latest)")]),t._v(" "),a("li",[t._v("基于ningx镜像来创建一个新的容器，并且准备运行")]),t._v(" "),a("li",[t._v("docker engine分配给这个容器一个虚拟IP地址")]),t._v(" "),a("li",[t._v("在宿主机上打开8000端口并把容器的80端口转发到宿主机上")]),t._v(" "),a("li",[t._v("启动容器，运行指定的命令(使用shell脚本启动nginx)")])]),t._v(" "),a("h3",{attrs:{id:"_5-什么是dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-什么是dockerfile"}},[t._v("#")]),t._v(" 5. 什么是dockerfile?")]),t._v(" "),a("ol",[a("li",[t._v("dockerfile是用于构建docker镜像的文件")]),t._v(" "),a("li",[t._v('dockerfile里包含了构建镜像所需的"指定"')]),t._v(" "),a("li",[t._v("dockerfile有其特定的语法规则")])]),t._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# DEBIAN_FRONTEND=noninteractive 取消交互式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --no-install-recommends 不安装非必须的依赖包")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" ubuntu:21.04")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt-get update && "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n    DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y python3.9 python3-pip python3.9-dev")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" hello.py /")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" ["),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"python3"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello.py"')]),t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);