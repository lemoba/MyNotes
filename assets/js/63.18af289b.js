(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{502:function(t,_,v){"use strict";v.r(_);var s=v(11),a=Object(s.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"基本架构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#基本架构"}},[t._v("#")]),t._v(" 基本架构")]),t._v(" "),v("h2",{attrs:{id:"_1-如何学习redis"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何学习redis"}},[t._v("#")]),t._v(" 1. 如何学习Redis")]),t._v(" "),v("p",[v("strong",[t._v('Redis全景图包括"两大维度，三大主线"')])]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("两大维度")]),t._v("：系统维度和应用维度")]),t._v(" "),v("li",[v("strong",[t._v("三大主线")]),t._v("：高性能、高可靠和高扩展\n"),v("ul",[v("li",[v("strong",[t._v("高性能主线")]),t._v("：包括线程模型、数据结构、持久化、网络框架；")]),t._v(" "),v("li",[v("strong",[t._v("高可靠主线")]),t._v("：包括主从复制、哨兵机制、集群；")]),t._v(" "),v("li",[v("strong",[t._v("高扩展主线")]),t._v("：包括数据分片、负载均衡")])])])]),t._v(" "),v("p",[v("strong",[t._v("学习方式")])]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("应用场景驱动(面)")])]),t._v(" "),v("li",[v("strong",[t._v("典型案例驱动(点)")])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/20220521170911.png"}})]),t._v(" "),v("th",[v("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/20220521170955.png"}})])])]),t._v(" "),v("tbody")]),t._v(" "),v("h2",{attrs:{id:"_2-一个键值数据库包括什么"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-一个键值数据库包括什么"}},[t._v("#")]),t._v(" 2. 一个键值数据库包括什么？")]),t._v(" "),v("blockquote",[v("p",[t._v("通常包括："),v("strong",[t._v("访问框架、索引模块、操作模块和存储模块")])])]),t._v(" "),v("h3",{attrs:{id:"_2-1-可以存哪些数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-可以存哪些数据"}},[t._v("#")]),t._v(" 2.1 可以存哪些数据")]),t._v(" "),v("p",[t._v("对于键值类型的数据库，基本的数据结构就是key-value模型，key是String类型，value可以是其他复杂类型。例如Memached支持的value类型仅仅为String类型，而Redis支持的value类型包括了String、哈希表、列表、集合等。")]),t._v(" "),v("h3",{attrs:{id:"_2-2-可以对数据做什么操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-可以对数据做什么操作"}},[t._v("#")]),t._v(" 2.2 可以对数据做什么操作")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("PUT：写入或更新一个key-value对")])]),t._v(" "),v("li",[v("p",[t._v("GET：根据一个key读取相应的value")])]),t._v(" "),v("li",[v("p",[t._v("DELETE：根据一个key删除一个value对")])])]),t._v(" "),v("h3",{attrs:{id:"_2-3-数据保存在内存还是在外存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-数据保存在内存还是在外存"}},[t._v("#")]),t._v(" 2.3 数据保存在内存还是在外存？")]),t._v(" "),v("ul",[v("li",[t._v("内存：读写超快(百ns级别)，但是断电易失，会丢失所有数据")]),t._v(" "),v("li",[t._v("外存：避免数据丢失，但是受限于磁盘的慢速读写(ms级别)，严重影响数据库的整体性能")])]),t._v(" "),v("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/20220521174209.png"}}),t._v(" "),v("h3",{attrs:{id:"_2-4-采用什么访问方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-采用什么访问方式"}},[t._v("#")]),t._v(" 2.4 采用什么访问方式")]),t._v(" "),v("ul",[v("li",[t._v("通过函数库调用的方式供外部应用使用如libsimplekv.so")]),t._v(" "),v("li",[t._v("通过网络框架以Socket通信的形式对外提供键值对操作")])]),t._v(" "),v("h3",{attrs:{id:"_2-5-如何定位键值对的位置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-如何定位键值对的位置"}},[t._v("#")]),t._v(" 2.5 如何定位键值对的位置")]),t._v(" "),v("p",[t._v("要想快速判断指定键是否存在于数据库就要依赖于索引模块，"),v("strong",[t._v("索引模块的作用是让键值数据库根据key找到相应value的存储位置，进而执行操作。")])]),t._v(" "),v("p",[v("strong",[t._v("索引类型")])]),t._v(" "),v("ul",[v("li",[t._v("哈希表")]),t._v(" "),v("li",[t._v("B+树")]),t._v(" "),v("li",[t._v("字典树")])]),t._v(" "),v("p",[t._v("Memcached和Redis采用哈希表作为key-value索引，而RocksDB则采用跳表作为内存中的key-value的索引。")]),t._v(" "),v("h3",{attrs:{id:"_2-6-不同操作的具体逻辑是什么样的"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-不同操作的具体逻辑是什么样的"}},[t._v("#")]),t._v(" 2.6 不同操作的具体逻辑是什么样的?")]),t._v(" "),v("p",[t._v("索引模块负责根据key找到相应的value的存储位置，然后根据不同的操作执行不同的逻辑：")]),t._v(" "),v("ul",[v("li",[t._v("对于GET/SCAN操作，根据key返回value即可")]),t._v(" "),v("li",[t._v("对于PUT一个新的键值对，则需要为改键值对分配内存空间")]),t._v(" "),v("li",[t._v("对于DELETE操作，需要删除键值对后并释放相应的内存空间，这个过程由分配器完成")])]),t._v(" "),v("h3",{attrs:{id:"_2-7-如何实现重启后快速提供服务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-如何实现重启后快速提供服务"}},[t._v("#")]),t._v(" 2.7 如何实现重启后快速提供服务？")]),t._v(" "),v("ul",[v("li",[t._v("将键值数据通过调用本地文件系统的操作接口保存在磁盘上")]),t._v(" "),v("li",[t._v("SimKV只是周期性地把内存中的键值数据保存在文件上，这样可以避免频繁写盘操作的性能影响，潜在风险就是可能会丢失数据")])]),t._v(" "),v("h2",{attrs:{id:"_3-总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-总结"}},[t._v("#")]),t._v(" 3. 总结")]),t._v(" "),v("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://mynotes-1252832980.cos.ap-shanghai.myqcloud.com/20220521181026.png"}}),t._v(" "),v("p",[v("strong",[t._v("从SimpleKV到Redis演进过程")])]),t._v(" "),v("ul",[v("li",[t._v("Redis主要通过网络框架进行访问，不在是动态库，使得Redis可以作为一个基础性的网络服务进行访问，扩大了Redis的应用范围")]),t._v(" "),v("li",[t._v("Redis的value数据类型很丰富，因此也提供了更多的操作接口")]),t._v(" "),v("li",[t._v("Redis的持久化模块能支持两种方式：日志(AOF)和快照(RDB)，这两种方式具有不同的优劣势，影响到Redis的访问性能和可靠性能")]),t._v(" "),v("li",[t._v("SimKV是个简单的单机剑指数据库，但是Redis支持高可靠集群和高扩展集群")])])])}),[],!1,null,null,null);_.default=a.exports}}]);