(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{476:function(s,t,a){"use strict";a.r(t);var e=a(11),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"锁"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#锁"}},[s._v("#")]),s._v(" 锁")]),s._v(" "),a("h4",{attrs:{id:"_1-什么是mvcc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是mvcc"}},[s._v("#")]),s._v(" 1. 什么是MVCC？")]),s._v(" "),a("blockquote",[a("p",[s._v("一致性非锁定读 ，是mysql基于自己的回滚机制为并发场景下的读取操作做一个优化。为"),a("strong",[s._v("读")]),s._v("控制的多版本")])]),s._v(" "),a("ul",[a("li",[s._v("基于回滚机制undo log")]),s._v(" "),a("li",[s._v("为读操作提供的多版本控制，为了解决并发环境下读操作不需要被锁定的这样一个目的来加快mysql的读取")])]),s._v(" "),a("h4",{attrs:{id:"_2-不同事务隔离下mvcc的表现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-不同事务隔离下mvcc的表现"}},[s._v("#")]),s._v(" 2. 不同事务隔离下MVCC的表现？")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("img",{staticStyle:{zoom:"55%"},attrs:{src:"/Users/lemoba/Library/Application Support/typora-user-images/image-20220314114854246.png",alt:"image-20220314114854246"}})]),s._v(" "),a("th",[a("img",{staticStyle:{zoom:"50%"},attrs:{src:"/Users/lemoba/Library/Application Support/typora-user-images/image-20220314115947817.png",alt:"image-20220314115947817"}})]),s._v(" "),a("th",[a("img",{staticStyle:{zoom:"50%"},attrs:{src:"/Users/lemoba/Library/Application Support/typora-user-images/image-20220314121924166.png",alt:"image-20220314121924166"}})])])]),s._v(" "),a("tbody")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for update会加锁🔐")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" l "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 共享锁")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" l "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lock")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("share")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看锁状态信息··········")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("innodb")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v("\\G\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h4",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])])])}),[],!1,null,null,null);t.default=r.exports}}]);